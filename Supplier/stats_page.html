<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Statistics | PaperSupply</title>
    <link rel="stylesheet" href="stats_page.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <header>
        <div class="logo">PaperSupply</div>
        <div class="user-info">
            <img src="https://via.placeholder.com/40" alt="User">
            <span>Admin User</span>
        </div>
    </header>

    <div class="sidebar">
        <ul>
            <li><a href="supplier_template.html">Dashboard</a></li>
            <li><a href="orders.html">Orders</a></li>
            <li><a href="customers_page.html">Customers</a></li>
            <li class="active"><a href="stats_page.html">Statistics</a></li>
            <li><a href="queries_page.html">Queries</a></li>
            <li><a href="settings.html">Settings</a></li>
        </ul>
    </div>

    <div class="main-content">
        <h1 class="dashboard-title">Statistics Dashboard</h1>

        <!-- Date Range Filter -->
        <div class="filter-container">
            <div class="date-filter">
                <label for="startDate">Start Date:</label>
                <input type="date" id="startDate">
                <label for="endDate">End Date:</label>
                <input type="date" id="endDate">
                <button id="applyDateFilter" class="btn btn-primary">Apply</button>
            </div>
        </div>

        <!-- Stats Summary Cards -->
        <div class="stats-container">
            <div class="stat-card">
                <h3>TOTAL PRODUCTS SOLD</h3>
                <div class="value" id="totalProductsSold">0</div>
            </div>
            <div class="stat-card">
                <h3>MOST POPULAR PRODUCT</h3>
                <div class="value" id="mostPopularProduct">-</div>
            </div>
            <div class="stat-card">
                <h3>AVERAGE DAILY ORDERS</h3>
                <div class="value" id="avgDailyOrders">0</div>
            </div>
            <div class="stat-card">
                <h3>PEAK ORDER DAY</h3>
                <div class="value" id="peakOrderDay">-</div>
            </div>
        </div>

        <!-- Product Frequency Chart -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Product Purchase Frequency</h2>
                <div class="chart-controls">
                    <select id="productChartType">
                        <option value="bar">Bar Chart</option>
                        <option value="pie">Pie Chart</option>
                    </select>
                    <button id="downloadProductChart" class="btn btn-secondary">Download</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="productFrequencyChart"></canvas>
            </div>
        </div>

        <!-- Daily Orders Chart -->
        <div class="chart-section">
            <div class="section-header">
                <h2>Daily Order Frequency</h2>
                <div class="chart-controls">
                    <select id="orderChartType">
                        <option value="line">Line Chart</option>
                        <option value="bar">Bar Chart</option>
                    </select>
                    <button id="downloadOrderChart" class="btn btn-secondary">Download</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="orderFrequencyChart"></canvas>
            </div>
        </div>

        <!-- Top Products Table -->
        <div class="table-section">
            <div class="section-header">
                <h2>Top Products</h2>
                <button id="exportTopProducts" class="btn btn-secondary">Export</button>
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>Product Name</th>
                            <th>Total Units Sold</th>
                            <th>Total Revenue</th>
                            <th>Average Units Per Order</th>
                            <th>Last Order Date</th>
                        </tr>
                    </thead>
                    <tbody id="topProductsTable">
                        <!-- Data will be populated dynamically -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="loading-overlay">
        <div class="spinner"></div>
    </div>

    <!-- Firebase Scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    
    <!-- Custom Scripts -->
    <script src="stats_page.js"></script>
    <script src="theme.js"></script>
    <script src="settings.js"></script>
</body>
</html> 